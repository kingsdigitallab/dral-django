{% load dral_wagtail_tags %}

{% for chapter in vis_data.chapters %}
    <h2>{{ chapter.name }}</h2>
    <table class="viz-proof">
        {% for block in chapter.blocks %}
            <tr class="keyword">
                <td colspan="10">
                    {{block.keyword.string}}
                    ({{block.keyword.forms}})
                    ({{ block.freq }})
                </td>
            </tr>
            {% for lg in block.languages %}
                <tr class="lang-row lang-row-{{lg.name}}">
                    <td class="lang">{{lg.name}}</td>
                    <td class="lang">{% if lg.omissions %}Z {{lg.omissions}}{% endif %}</td>
                    <td class="lang {% if lg.unknowns %}string-unknown{% endif %}">{% if lg.unknowns %}? {{lg.unknowns}}{% endif %}</td>
                    {% for string in lg.strings %}
                        <td class="st {% if string.string is None %}string-none{% endif %} {% if string.string.0 == '?' %}string-unknown{% endif %}">{{ string.string|default:"ZERO" }}{% if string.context and string.context|length < string.cell|length %} [context truncated]{% endif %}</td>
                    {% endfor %}
                </tr>
            {% endfor %}
            <tr class="sidxs">
                <td></td>
                <td></td>
                <td></td>
                {% for idx in block.sidxs %}
                    <td>{{ idx|default:"?" }}</td>
                {% endfor %}
            </tr>
        {% endfor %}
    </table>
{% endfor %}
